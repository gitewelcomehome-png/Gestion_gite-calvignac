# üìä PROPOSITION SYST√àME D'ABONNEMENTS - Gestion G√Æte Calvignac

## üéØ Vue d'ensemble

Syst√®me d'abonnements multi-niveaux pour mon√©tiser votre plateforme SaaS de gestion de g√Ætes.
**Pas de plan gratuit** - Mod√®le payant d√®s le d√©part avec 14 jours d'essai.

---

## üí∞ NIVEAUX D'ABONNEMENTS (3 plans)

### üéØ **SOLO** - 10‚Ç¨/mois (avec engagement) ou 15‚Ç¨/mois (sans engagement)
**Objectif** : Parfait pour d√©marrer avec 1 g√Æte

**Fonctionnalit√©s incluses :**
- ‚úÖ **Calendrier multi-plateformes** : Synchronisation Airbnb, Booking, Abritel

, etc.
- ‚úÖ **Planning m√©nage automatique** : Organisation compl√®te des nettoyages
- ‚úÖ **Fiscalit√© LMNP compl√®te** : Calculs LMNP/LMP/Micro-BIC avec comparateur
- ‚úÖ **Fiche voyageur QR WiFi** : Fiches clients avec QR codes
- ‚úÖ **Analytics & stats** : Taux d'occupation, CA, statistiques
- ‚úÖ **Support email** : R√©ponse sous 48h ouvr√©es
- ‚úÖ **Dashboard complet** : Vue d'ensemble en temps r√©el
- ‚úÖ **Gestion draps/stock** : Inventaire et rotations
- ‚úÖ **R√©servations illimit√©es** : Pas de limite de r√©servations

**Limitations :**
- 1 g√Æte maximum
- Pas d'acc√®s IA

**Prix :**
- üîí **Avec engagement 12 mois** : 10‚Ç¨/mois (120‚Ç¨/an) - **√âconomie 60‚Ç¨/an**
- ‚åõ **Sans engagement** : 15‚Ç¨/mois (180‚Ç¨/an)

---

### ‚≠ê **DUO** - 15‚Ç¨/mois (avec engagement) ou 22‚Ç¨/mois (sans engagement)
**Objectif** : Le plus populaire - Pour d√©velopper avec 2 g√Ætes

**Fonctionnalit√©s incluses :**
- ‚úÖ **Tout Solo +**
- ‚úÖ **2 g√Ætes synchronis√©s** : Gestion multi-propri√©t√©s
- ‚úÖ **Vue multi-propri√©t√©s** : Dashboard consolid√©
- ‚úÖ **√âquipe m√©nage multi-sites** : Planning centralis√©
- ‚úÖ **ü§ñ Aide IA** : Assistant intelligent pour vous aider dans vos t√¢ches
- ‚úÖ **Support email prioritaire** : R√©ponse sous 24h ouvr√©es
- ‚úÖ **Formation vid√©o** : Tutoriels complets

**Limitations :**
- 2 g√Ætes maximum

**Prix :**
- üîí **Avec engagement 12 mois** : 15‚Ç¨/mois (180‚Ç¨/an) - **√âconomie 84‚Ç¨/an**
- ‚åõ **Sans engagement** : 22‚Ç¨/mois (264‚Ç¨/an)

---

### üíº **QUATTRO** - 23‚Ç¨/mois (avec engagement) ou 33‚Ç¨/mois (sans engagement)
**Objectif** : Pour les pros avec 4 g√Ætes

**Fonctionnalit√©s incluses :**
- ‚úÖ **Tout Duo +**
- ‚úÖ **4 g√Ætes synchronis√©s** : Gestion portfolio complet
- ‚úÖ **ü§ñ Communication/Conseil IA** : Messages et conseils personnalis√©s envoy√©s par IA
- ‚úÖ **API connexions custom** : Int√©gration avec vos outils
- ‚úÖ **Tableaux de bord avanc√©s** : Analytics pouss√©s
- ‚úÖ **Support VIP** : Email 4h ouvr√©es + RDV t√©l√©phone + WhatsApp Business
- ‚úÖ **Formation 1h perso** : Coaching personnalis√©

**Limitations :**
- 4 g√Ætes maximum

**Prix :**
- üîí **Avec engagement 12 mois** : 23‚Ç¨/mois (276‚Ç¨/an) - **√âconomie 120‚Ç¨/an**
- ‚åõ **Sans engagement** : 33‚Ç¨/mois (396‚Ç¨/an)

---

## ‚ö†Ô∏è NOTE : PLANS G√éTES DE FRANCE

Les abonnements **G√Ætes de France** sont des **accords sp√©ciaux n√©goci√©s directement** avec la plateforme.
Ils **ne sont pas affich√©s publiquement** sur la page tarifaire et n√©cessitent :
- Contact direct avec l'administrateur
- V√©rification de l'adh√©sion G√Ætes de France
- Attribution manuelle d'un plan personnalis√©

**Process :**
1. Client adh√©rent GDF me contacte
2. Validation justificatif adh√©sion
3. N√©gociation tarif sp√©cial
4. Attribution plan custom avec features GDF activ√©es

---

## ÔøΩÔ∏è OPTION : AUTOMATISATION G√éTES DE FRANCE

**Disponibilit√©** : √Ä partir du plan **DUO** (15‚Ç¨/mois)

**Activation** :
- Option activable dans les param√®tres
- V√©rification adh√©sion G√Ætes de France (upload justificatif)
- Gratuit pour adh√©rents GDF ou inclus dans DUO/QUATTRO

**Fonctionnalit√©s incluses :**
- ‚úÖ **Badge "G√Ætes de France"** sur fiches voyageurs
- ‚úÖ **Export format G√Ætes de France** : Rapports conformes au label
- ‚úÖ **Crit√®res qualit√© GDF** : Suivi des standards qualit√© du label
- ‚úÖ **IA sp√©cialis√©e GDF** (sur QUATTRO uniquement) : Communications adapt√©es
- ‚úÖ **Templates sp√©cifiques** : Messages pr√©-format√©s selon standards GDF

**Process d'activation :**
1. Client active l'option dans "Param√®tres > G√Ætes de France"
2. Upload justificatif d'adh√©sion (carte adh√©rent, attestation)
3. Validation manuelle par admin
4. Activation des fonctionnalit√©s GDF dans l'interface

---

## ÔøΩüèóÔ∏è ARCHITECTURE TECHNIQUE

### üìã Tables Supabase

#### **1. Table `subscriptions_plans`**
```sql
CREATE TABLE subscriptions_plans (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL, -- 'solo', 'duo', 'quattro'
  display_name TEXT NOT NULL, -- 'SOLO', 'DUO', 'QUATTRO'
  price_monthly DECIMAL(10,2) NOT NULL, -- Prix sans engagement
  price_monthly_committed DECIMAL(10,2) NOT NULL, -- Prix avec engagement 12 mois
  price_yearly DECIMAL(10,2), -- Prix annuel (12 mois)
  max_gites INTEGER DEFAULT 1,
  requires_commitment BOOLEAN DEFAULT false,
  allows_gdf_option BOOLEAN DEFAULT false, -- Permet l'option G√Ætes de France
  features JSONB NOT NULL, -- Liste des features activ√©es
  stripe_price_id_monthly TEXT,
  stripe_price_id_monthly_committed TEXT,
  stripe_price_id_yearly TEXT,
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

**Exemple features JSONB pour SOLO :**
```json
{
  "dashboard": true,
  "reservations": true,
  "menage": true,
  "draps": true,
  "statistiques": true,
  "fiscalite": true,
  "fiches_clients": true,
  "calendrier": true,
  "multi_gites_view": false,
  "ai_assistant": false,
  "ai_communication": false,
  "api_access": false,
  "support_level": "chat",
  "formation": false
}
```

**Exemple features JSONB pour DUO :**
```json
{
  "dashboard": true,
  "reservations": true,
  "menage": true,
  "draps": true,
  "statistiques": true,
  "fiscalite": true,
  "fiches_clients": true,
  "calendrier": true,
  "multi_gites_view": true,
  "ai_assistant": true,
  "ai_communication": false,
  "api_access": false,
  "support_level": "priority",
  "formation": "video"
}
```

**Exemple features JSONB pour QUATTRO :**
```json
{
  "dashboard": true,
  "reservations": true,
  "menage": true,
  "draps": true,
  "statistiques": "advanced",
  "fiscalite": true,
  "fiches_clients": true,
  "calendrier": true,
  "multi_gites_view": true,
  "ai_assistant": true,
  "ai_communication": true,
  "api_access": true,
  "gdf_option_available": true,
  "support_level": "vip",
  "formation": "personal_1h"
}
```

#### **2. Table `user_subscriptions`**
```sql
CREATE TABLE user_subscriptions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users NOT NULL,
  plan_id UUID REFERENCES subscriptions_plans NOT NULL,
  status TEXT NOT NULL, -- 'active', 'trialing', 'past_due', 'canceled', 'expired'
  billing_cycle TEXT NOT NULL, -- 'monthly', 'monthly_committed', 'yearly'
  stripe_customer_id TEXT,
  stripe_subscription_id TEXT,
  current_period_start TIMESTAMPTZ,
  current_period_end TIMESTAMPTZ,
  cancel_at_period_end BOOLEAN DEFAULT false,
  trial_ends_at TIMESTAMPTZ,
  commitment_end_date TIMESTAMPTZ, -- Date de fin d'engagement 12 mois
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- RLS
ALTER TABLE user_subscriptions ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Users can view own subscription" ON user_subscriptions FOR SELECT USING (auth.uid() = user_id);
```

#### **3. Table `subscription_usage`** (tracking)
```sql
CREATE TABLE subscription_usage (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users NOT NULL,
  period_month DATE NOT NULL, -- Premier jour du mois
  gites_count INTEGER DEFAULT 0,
  reservations_count INTEGER DEFAULT 0,
  ai_assistant_calls INTEGER DEFAULT 0,
  ai_communication_calls INTEGER DEFAULT 0,
  api_calls_count INTEGER DEFAULT 0,
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

#### **4. Table `gites_de_france_options`** (pour option GDF)
```sql
CREATE TABLE gites_de_france_options (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users NOT NULL UNIQUE,
  is_enabled BOOLEAN DEFAULT false,
  verification_status TEXT NOT NULL, -- 'pending', 'approved', 'rejected', 'expired'
  document_url TEXT, -- URL du justificatif upload√©
  membership_number TEXT, -- Num√©ro d'adh√©rent GDF
  expiration_date DATE, -- Date d'expiration de l'adh√©sion
  verified_at TIMESTAMPTZ,
  verified_by UUID REFERENCES auth.users, -- Admin qui a v√©rifi√©
  notes TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- RLS
ALTER TABLE gites_de_france_options ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Users can view own GDF option" ON gites_de_france_options FOR SELECT USING (auth.uid() = user_id);
CREATE POLICY "Users can update own GDF option" ON gites_de_france_options FOR UPDATE USING (auth.uid() = user_id);
```

---

## üîê CONTR√îLE D'ACC√àS

### JavaScript Helper : `subscription-manager.js`

```javascript
// R√©cup√©rer l'abonnement actif de l'utilisateur
async function getUserSubscription(userId) {
  const { data, error } = await supabase
    .from('user_subscriptions')
    .select(`
      *,
      plan:subscriptions_plans(*)
    `)
    .eq('user_id', userId)
    .eq('status', 'active')
    .single();
  
  return data;
}

// V√©rifier l'acc√®s √† une fonctionnalit√©
function hasFeatureAccess(subscription, featureName) {
  if (!subscription?.plan?.features) return false;
  const feature = subscription.plan.features[featureName];
  return feature === true || (typeof feature === 'string' && feature !== 'false');
}

// V√©rifier les limites de g√Ætes (principale limite)
function checkGitesLimit(subscription, currentGitesCount) {
  const maxGites = subscription.plan.max_gites;
  if (maxGites === null) return true; // Illimit√© (plan GDF)
  return currentGitesCount < maxGites;
}

// V√©rifier acc√®s aux features IA
function hasAIAccess(subscription, aiType = 'assistant') {
  if (aiType === 'assistant') {
    return subscription.plan.features.ai_assistant === true;
  } else if (aiType === 'communication') {
    return subscription.plan.features.ai_communication !== false;
  }
  return false;
}

// Obtenir le niveau de support
function getSupportLevel(subscription) {
  return subscription.plan.features.support_level || 'chat';
}
```

### Contr√¥le UI

```javascript
// Contr√¥ler l'ajout de g√Ætes selon le plan
async function checkCanAddGite(userId) {
  const subscription = await getUserSubscription(userId);
  const { data: gites } = await supabase
    .from('gites')
    .select('id')
    .eq('user_id', userId);
  
  const currentCount = gites?.length || 0;
  const maxGites = subscription.plan.max_gites;
  
  if (maxGites !== null && currentCount >= maxGites) {
    showUpgradeModal({
      currentPlan: subscription.plan.name,
      gitesCount: currentCount,
      maxGites: maxGites
    });
    return false;
  }
  
  return true;
}

// Afficher bandeau discret selon le plan
function displaySubscriptionBanner(subscription) {
  const bannerEl = document.getElementById('subscription-banner');
  const plan = subscription.plan;
  const gitesText = plan.max_gites === null ? '‚àû g√Ætes' : `${plan.max_gites} g√Æte(s)`;
  
  bannerEl.innerHTML = `
    <div class="subscription-info">
      Plan <strong>${plan.display_name}</strong> - ${gitesText}
      <button onclick="showBillingPortal()">‚öôÔ∏è G√©rer</button>
    </div>
  `;
}

// Contr√¥ler l'acc√®s aux features IA
function initializeAIFeatures(subscription) {
  const aiAssistantBtn = document.getElementById('ai-assistant-btn');
  const aiCommunicationBtn = document.getElementById('ai-communication-btn');
  
  // Aide IA (disponible sur DUO et sup√©rieur)
  if (subscription.plan.features.ai_assistant) {
    aiAssistantBtn.classList.remove('locked');
  } else {
    aiAssistantBtn.classList.add('locked');
    aiAssistantBtn.onclick = () => showUpgradeModal({feature: 'ai_assistant', requiredPlan: 'DUO'});
  }
  
  // Communication/Conseil IA (disponible sur QUATTRO et GDF)
  if (subscription.plan.features.ai_communication) {
    aiCommunicationBtn.classList.remove('locked');
  } else {
    aiCommunicationBtn.classList.add('locked');
    aiCommunicationBtn.onclick = () => showUpgradeModal({feature: 'ai_communication', requiredPlan: 'QUATTRO'});
  }
}
```

---

## üí≥ INT√âGRATION PAIEMENT : STRIPE

### Configuration Stripe

1. **Products Stripe** :
   - Solo : 3 prix
     * 15‚Ç¨/mois (sans engagement)
     * 10‚Ç¨/mois (avec engagement 12 mois)
     * 120‚Ç¨/an (paiement annuel)
   - Duo : 3 prix + mention "ü§ñ Avec Aide IA"
     * 22‚Ç¨/mois (sans engagement)
     * 15‚Ç¨/mois (avec engagement 12 mois)
     * 180‚Ç¨/an (paiement annuel)
   - Quattro : 3 prix + mention "ü§ñ Avec Communication IA"
     * 33‚Ç¨/mois (sans engagement)
     * 23‚Ç¨/mois (avec engagement 12 mois)
     * 276‚Ç¨/an (paiement annuel)
   - G√Ætes de France : 3 prix + mention "üèõÔ∏è Tarif adh√©rent"
     * 27‚Ç¨/mois (sans engagement)
     * 18‚Ç¨/mois (avec engagement 12 mois)
     * 216‚Ç¨/an (paiement annuel)

2. **Webhooks** :
   - `checkout.session.completed` ‚Üí Activer l'abonnement
   - `invoice.paid` ‚Üí Renouvellement r√©ussi
   - `invoice.payment_failed` ‚Üí Suspendre l'acc√®s (grace period 7 jours)
   - `customer.subscription.deleted` ‚Üí Suspendre compte
   - `customer.subscription.updated` ‚Üí Mettre √† jour le plan (upgrade/downgrade)

### Fichier `stripe-handler.js`

```javascript
// Cr√©er une session Checkout Stripe
async function createCheckoutSession(planId, billingCycle = 'monthly_committed') {
  const { data: plan } = await supabase
    .from('subscriptions_plans')
    .select('*')
    .eq('id', planId)
    .single();
  
  let priceId;
  if (billingCycle === 'yearly') {
    priceId = plan.stripe_price_id_yearly;
  } else if (billingCycle === 'monthly_committed') {
    priceId = plan.stripe_price_id_monthly_committed;
  } else {
    priceId = plan.stripe_price_id_monthly;
  }
  
  const response = await fetch('/api/create-checkout', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      priceId,
      billingCycle,
      userId: user.id,
      successUrl: window.location.origin + '/success',
      cancelUrl: window.location.origin + '/pricing'
    })
  });
  
  const { sessionId } = await response.json();
  stripe.redirectToCheckout({ sessionId });
}
```

---

## üé® UI/UX PROPOS√âE

### 1. **Bandeau d'abonnement (discret)**
Afficher dans le menu ou footer :
```html
<div class="subscription-banner subscription-solo">
  Plan <strong>SOLO</strong> - 1/1 g√Æte utilis√©
  <button class="btn-manage">‚öôÔ∏è G√©rer mon abonnement</button>
</div>
```

Quand limite atteinte :
```html
<div class="subscription-banner subscription-limit">
  ‚ö†Ô∏è Limite atteinte (1/1 g√Æte) - <a href="#upgrade">Passer √† DUO pour 2 g√Ætes</a>
</div>
```

### 2. **Modal limite atteinte**
Quand l'utilisateur tente d'ajouter un g√Æte au-del√† de sa limite :
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üìä Limite de g√Ætes atteinte         ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ  Vous avez atteint la limite de      ‚îÇ
‚îÇ  1 g√Æte avec votre plan SOLO.        ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ  Passez √† DUO pour g√©rer 2 g√Ætes     ‚îÇ
‚îÇ  pour seulement 5‚Ç¨/mois de plus !    ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ  [Upgrade vers DUO] [Plus tard]      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3. **Boutons d'acc√®s IA**

Dans le dashboard ou menu :
```html
<!-- Aide IA (DUO et sup√©rieur) -->
<button id="ai-assistant-btn" class="btn-ai">
  ü§ñ Aide IA
  <span class="badge-new">NOUVEAU</span>
</button>

<!-- Communication/Conseil IA (QUATTRO et GDF) -->
<button id="ai-communication-btn" class="btn-ai">
  ü§ñ Communication IA
  <span class="badge-pro">PRO</span>
</button>
```

Si verrouill√© :
```html
<button class="btn-ai locked" onclick="showUpgradeModal('ai_assistant')">
  üîí Aide IA
  <span class="badge-locked">DUO requis</span>
</button>
```

### 4. **Page commerciale (existante)**
La page commerciale existe d√©j√† dans [index.html](index.html) ! Il faut juste :
- Ajouter un 4√®me plan "G√Ætes de France"
- Ajouter badges "ü§ñ Avec IA" sur DUO et QUATTRO
- Lien "G√©rer mon abonnement" pour users connect√©s
- Bouton "Changer de plan" visible dans le dashboard
- Portal Stripe pour g√©rer facturation/annulation

**Points importants UI :**
- Toggle "Avec engagement" / "Sans engagement" bien visible ‚úÖ (d√©j√† fait)
- Mise en avant de l'√©conomie annuelle ‚úÖ (d√©j√† fait)
- Badge "Le plus populaire" sur DUO ‚úÖ (d√©j√† fait)
- Essai 14 jours bien visible ‚úÖ (d√©j√† fait)

---

## üìä TABLEAU COMPARATIF FEATURES

| Fonctionnalit√©          | SOLO | DUO | QUATTRO |
|-------------------------|------|-----|---------
| **G√Ætes**               | **1** | **2** | **4** |
| **Prix avec engagement**    | **10‚Ç¨/mois** | **15‚Ç¨/mois** | **23‚Ç¨/mois** |
| Prix sans engagement    | 15‚Ç¨/mois | 22‚Ç¨/mois | 33‚Ç¨/mois |
| √âconomie annuelle       | 60‚Ç¨/an | 84‚Ç¨/an | 120‚Ç¨/an |
| **FONCTIONNALIT√âS** | | | | |
| Dashboard complet       | ‚úÖ | ‚úÖ | ‚úÖ |
| Calendrier multi-plateformes | ‚úÖ | ‚úÖ | ‚úÖ |
| R√©servations illimit√©es | ‚úÖ | ‚úÖ | ‚úÖ |
| Planning m√©nage auto    | ‚úÖ | ‚úÖ Multi-sites | ‚úÖ Multi-sites |
| Gestion draps/stock     | ‚úÖ | ‚úÖ | ‚úÖ |
| Fiscalit√© LMNP compl√®te | ‚úÖ | ‚úÖ | ‚úÖ |
| Fiches voyageur QR WiFi | ‚úÖ | ‚úÖ | ‚úÖ |
| Analytics & stats       | ‚úÖ | ‚úÖ | ‚úÖ Avanc√©s |
| Vue multi-propri√©t√©s    | ‚ùå | ‚úÖ | ‚úÖ |
| **ü§ñ Aide IA**          | ‚ùå | ‚úÖ | ‚úÖ |
| **ü§ñ Communication/Conseil IA** | ‚ùå | ‚ùå | ‚úÖ |
| **üèõÔ∏è Tableau G√Ætes de France** | ‚ùå | ‚úÖ | ‚úÖ |
| API connexions custom   | ‚ùå | ‚ùå | ‚úÖ |
| Formation               | ‚ùå | üìπ Vid√©o | üë§ 1h perso |
| Support                 | ‚úâÔ∏è Email 48h | ‚úâÔ∏è Email 24h | ‚úâÔ∏è 4h + üìû RDV |
| **Essai gratuit**       | **‚úÖ 14 jours** | **‚úÖ 14 jours** | **‚úÖ 14 jours** |

---

## üìû SUPPORT & FORMATIONS

### Support par niveau

| Niveau | Canal | D√©lai r√©ponse | Horaires |
|--------|-------|---------------|----------|
| **SOLO** | ‚úâÔ∏è Email | 48h ouvr√©es | Lun-Ven 9h-18h |
| **DUO** | ‚úâÔ∏è Email prioritaire | 24h ouvr√©es | Lun-Ven 9h-18h |
| **QUATTRO** | ‚úâÔ∏è Email VIP + üìû RDV + WhatsApp | 4h ouvr√©es | Lun-Ven 9h-18h |
| **GDF** | ‚úâÔ∏è Email VIP GDF + üìû RDV + WhatsApp | 4h ouvr√©es | Lun-Ven 9h-18h |

### Formations par niveau

| Niveau | Type | Contenu |
|--------|------|---------|
| **SOLO** | ‚ùå Aucune | Documentation √©crite uniquement |
| **DUO** | üìπ Vid√©os | Biblioth√®que compl√®te de tutoriels |
| **QUATTRO** | üë§ 1h personnalis√©e | Session 1-√†-1 + acc√®s vid√©os |
| **GDF** | üë§ 1h GDF personnalis√©e | Expert sp√©cialis√© GDF + vid√©os |

### üí¨ Chat en ligne (√Ä IMPL√âMENTER)

**Recommandation : Crisp Chat**
- Gratuit jusqu'√† 2 agents
- Widget moderne et responsive
- Notifications temps r√©el
- Multi-agents et historique

**Proposition d'acc√®s :**
- **SOLO** : ‚ùå Pas de chat OU chat avec r√©ponse lente (hors heures = lendemain)
- **DUO** : üí¨ Chat avec r√©ponse sous 2h ouvr√©es
- **QUATTRO** : üí¨ Chat prioritaire sous 30min ouvr√©es
- **GDF** : üí¨ Chat ultra-prioritaire sous 30min

**Alternatives :**
- Tawk.to (gratuit, moins moderne)
- Intercom (payant ~74‚Ç¨/mois, tr√®s pro)
- Widget custom avec Supabase Realtime

---

## üöÄ PLAN D'IMPL√âMENTATION

### **Phase 1 : Base de donn√©es** (2h)
1. Cr√©er les tables `subscriptions_plans`, `user_subscriptions`, `subscription_usage`
2. Cr√©er table `gites_de_france_options` pour l'option GDF
3. Ins√©rer les 3 plans (Solo, Duo, Quattro) avec leurs features
4. Cr√©er les RLS policies
5. Attribuer plan SOLO √† l'admin (vous) pour test

### **Phase 2 : Backend Stripe** (4h)
1. Configuration Stripe (Products + Prices pour chaque plan et cycle)
   - Solo : 3 prix (15‚Ç¨/mois, 10‚Ç¨/mois engag√©, 120‚Ç¨/an)
   - Duo : 3 prix + mention "ü§ñ Avec Aide IA + Option GDF"
   - Quattro : 3 prix + mention "ü§ñ Avec Communication IA + Option GDF"
2. Cr√©er API `/api/create-checkout`
3. Cr√©er API `/api/gdf-option/request` pour demander activation GDF
4. Cr√©er API `/api/gdf-option/verify` (admin) pour valider adh√©rent
5. G√©rer webhooks Stripe (`/api/webhooks/stripe`)
6. Fonction Edge Supabase pour sync subscription

### **Phase 3 : Frontend Core** (4h)
1. Cr√©er `subscription-manager.js`
2. Limiter le nombre de g√Ætes selon le plan
3. Bandeau abonnement en header (discret)
4. Modal upgrade quand limite atteinte
5. Int√©grer boutons d'acc√®s IA (DUO : Aide IA, QUATTRO : Communication IA)
6. Section "Param√®tres > Option G√Ætes de France" avec upload justificatif

### **Phase 4 : Page Pricing** (3h)
1. Ajouter badges "ü§ñ Avec IA" sur DUO et QUATTRO
2. Ajouter mention "üèõÔ∏è Option G√Ætes de France disponible" sur DUO et QUATTRO
3. Int√©gration Stripe Checkout
4. Encart "Vous √™tes adh√©rent G√Ætes de France ? Option disponible d√®s le plan DUO"
5. Animations & polish

### **Phase 5 : Gestion abonnement** (4h)
1. Page "Mon abonnement" dans param√®tres
2. Section "Option G√Ætes de France" avec statut v√©rification
3. Annulation/changement de plan
4. Portal client Stripe
5. Facturation & historique
6. Interface admin pour v√©rifier demandes GDF (approval/reject)

### **Phase 6 : Tests & Polish** (3h)
1. Tests flows complets
2. Gestion cas d'erreur
3. Emails transactionnels
4. Documentation utilisateur

**Total estim√© : 22h de d√©veloppement**

---

## üí° RECOMMANDATIONS

### ‚úÖ √Ä faire
1. **P√©riode d'essai** : 14 jours gratuits D√âJ√Ä pr√©vu sur la page commerciale ‚úÖ
2. **Remise annuelle** : D√©j√† en place (√©conomies de 60‚Ç¨ √† 120‚Ç¨/an selon plan) ‚úÖ
3. **Option avec/sans engagement** : D√âJ√Ä en place, bien mettre en avant l'√©conomie ‚úÖ
4. **Option G√Ætes de France** : Gratuite pour adh√©rents GDF, validation manuelle
5. **Partenariat G√Ætes de France** : Contacter la f√©d√©ration pour accord officiel (optionnel)
6. **Coupons** : Syst√®me de codes promo pour affili√©s/partenaires
6. **Analytics** : Tracker conversions et churn rate
7. **Communications IA** : D√©velopper des templates adapt√©s aux standards G√Ætes de France

### ‚ö†Ô∏è Points d'attention
1. **Pas de clients actuels** : Lancement direct avec syst√®me d'abonnement
2. **Facturation** : TVA fran√ßaise (20%) √† g√©rer avec Stripe Tax
3. **RGPD** : Mentions l√©gales + conservation donn√©es si annulation
4. **V√©rification GDF** : Process de validation manuel avant automatisation
5. **Engagement 12 mois** : Bien expliquer les conditions de r√©siliation anticip√©e
6. **IA Features** : S'assurer que les fonctionnalit√©s IA existent avant de les vendre
7. **Chat support** : Impl√©menter Crisp ou Tawk.to pour chat en ligne (recommand√©)

---

## ‚ùì QUESTIONS √Ä VALIDER

1. ‚úÖ **Tarification** : Tarifs existants de la page commerciale utilis√©s
2. ‚úÖ **Pas de plan gratuit** : Conform√©ment √† votre demande
3. ‚úÖ **Limite g√Ætes** : 1/2/4/illimit√© (GDF)
4. ‚úÖ **Fiscalit√©** : Incluse d√®s SOLO (bon argument de vente)
5. ‚úÖ **Trial** : 14 jours d√©j√† pr√©vu sur page commerciale
6. ‚úÖ **Aide IA** : Niveau DUO et sup√©rieur
7. ‚úÖ **Communication/Conseil IA** : Niveau QUATTRO uniquement
8. ‚úÖ **Option G√Ætes de France** : Disponible d√®s DUO, activation sur demande
9. **Option GDF gratuite ou payante** : Gratuite pour adh√©rents GDF valid√©s ?
10. **V√©rification GDF** : Upload justificatif manuel (carte adh√©rent, attestation)
11. **IA Communication** : Cette fonctionnalit√© existe d√©j√† ou √† d√©velopper ?
12. **Stripe** : C'est le bon choix pour la France, confirmer ?

---

## üìà PR√âVISIONS BUSINESS

**Hypoth√®ses** :
- 70% des utilisateurs choisissent l'engagement 12 mois (√©conomie)
- 50% Solo, 30% Duo, 15% Quattro, 5% GDF (r√©partition estim√©e)

**Sc√©nario conservateur** (100 utilisateurs payants apr√®s 1 an) :
- 50 SOLO : 35 engag√©s (10‚Ç¨) + 15 mensuels (15‚Ç¨) = **575‚Ç¨/mois**
- 35 DUO : 24 engag√©s (15‚Ç¨) + 11 mensuels (22‚Ç¨) = **602‚Ç¨/mois**
- 15 QUATTRO : 10 engag√©s (23‚Ç¨) + 5 mensuels (33‚Ç¨) = **395‚Ç¨/mois**
**Total MRR : 1 572‚Ç¨/mois = 18 864‚Ç¨/an**
(+ 5-10% ont l'option GDF activ√©e)

**Sc√©nario r√©aliste** (250 utilisateurs payants apr√®s 2 ans) :
- 130 SOLO : 91 engag√©s (10‚Ç¨) + 39 mensuels (15‚Ç¨) = **1 495‚Ç¨/mois**
- 85 DUO : 59 engag√©s (15‚Ç¨) + 26 mensuels (22‚Ç¨) = **1 457‚Ç¨/mois**
- 35 QUATTRO : 24 engag√©s (23‚Ç¨) + 11 mensuels (33‚Ç¨) = **915‚Ç¨/mois**
**Total MRR : 3 867‚Ç¨/mois = 46 404‚Ç¨/an**
(+ 10-15% ont l'option GDF activ√©e)

**Sc√©nario optimiste** (500 utilisateurs payants apr√®s 3 ans) :
- 260 SOLO : 182 engag√©s (10‚Ç¨) + 78 mensuels (15‚Ç¨) = **2 990‚Ç¨/mois**
- 170 DUO : 119 engag√©s (15‚Ç¨) + 51 mensuels (22‚Ç¨) = **2 907‚Ç¨/mois**
- 70 QUATTRO : 49 engag√©s (23‚Ç¨) + 21 mensuels (33‚Ç¨) = **1 820‚Ç¨/mois**
**Total MRR : 7 717‚Ç¨/mois = 92 604‚Ç¨/an**
(+ 15-20% ont l'option GDF activ√©e)

---

## üéØ PROCHAINES √âTAPES

1. **Valider** cette proposition avec vos ajustements
2. **Clarifier** les features IA existantes vs √† d√©velopper
3. **Cr√©er** compte Stripe et configurer les 4 produits
4. **D√©marrer** Phase 1 : Base de donn√©es

Pr√™t √† d√©marrer l'impl√©mentation ? üöÄ
