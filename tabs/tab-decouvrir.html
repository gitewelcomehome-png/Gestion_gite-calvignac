            
            <!-- S√âLECTEUR DE G√éTE -->
            <div class="card" style="background: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%); color: white;">
                <div class="card-header" style="border-bottom: 2px solid rgba(255,255,255,0.3);">
                    <span class="card-icon">üó∫Ô∏è</span>
                    <h2 class="card-title">√Ä D√©couvrir Autour des G√Ætes</h2>
                </div>
                <div style="padding: 20px;">
                    <p style="font-size: 1.1rem; opacity: 0.95; margin-bottom: 20px;">Activit√©s, restaurants, sites touristiques dans un rayon de 25km ‚Ä¢ Mise √† jour automatique des √©v√©nements</p>
                    <div style="display: flex; gap: 15px;">
                        <button class="btn" style="background: white; color: #FF6B6B; font-weight: 700; padding: 15px 40px;" onclick="selectGiteDecouvrir('Tr√©voux')">
                            üè∞ Tr√©voux
                        </button>
                        <button class="btn" style="background: white; color: #FF6B6B; font-weight: 700; padding: 15px 40px;" onclick="selectGiteDecouvrir('Couzon')">
                            ‚õ∞Ô∏è Couzon
                        </button>
                    </div>
                </div>
            </div>

            <form id="formDecouvrir" style="display: none;">
                <input type="hidden" id="decouvrir_gite">
                
                <!-- TITRE G√éTE S√âLECTIONN√â -->
                <div class="alert alert-info">
                    <strong>üìç G√Æte s√©lectionn√© :</strong> <span id="selectedGiteDecouvrir" style="font-weight: 700;"></span>
                </div>

                <!-- CARTE AVEC FILTRES -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üìÖ</span>
                        <h2 class="card-title">√âv√©nements de la Semaine</h2>
                        <button type="button" class="btn btn-secondary" onclick="refreshEvenements()" style="margin-left: auto; width: 50px; height: 50px; padding: 0; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;" title="Actualiser">
                            üîÑ
                        </button>
                    </div>
                    
                    <div class="alert alert-info">
                        <strong>üìÖ Semaine du :</strong> <span id="dateEvenements" style="font-weight: 700;"></span>
                    </div>
                    

                    
                    <!-- Carte interactive avec filtres -->
                    <div class="card">
                    <div style="display: grid; grid-template-columns: 1fr 250px; gap: 20px; margin-bottom: 20px;">
                        <!-- Carte √† gauche -->
                        <div id="mapEvenements" style="height: 600px; border-radius: 12px; display: none; z-index: 1; box-shadow: 0 4px 15px rgba(0,0,0,0.1);"></div>
                        
                        <!-- Filtres √† droite -->
                        <div style="
                            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                            padding: 15px;
                            border-radius: 12px;
                            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
                            height: fit-content;
                        ">
                            <h3 style="
                                color: white;
                                margin: 0 0 12px 0;
                                font-size: 1rem;
                                display: flex;
                                align-items: center;
                                gap: 8px;
                            ">üó∫Ô∏è Filtres</h3>
                            
                            <!-- Filtre par cat√©gorie avec boutons -->
                            <div style="margin-bottom: 15px;">
                                <label style="color: white; font-weight: 600; display: block; margin-bottom: 8px; font-size: 0.85rem;">
                                    üìÇ Cat√©gorie
                                </label>
                                <div style="display: flex; flex-direction: column; gap: 6px;">
                                    <button 
                                        class="btn-filtre-cat" 
                                        data-categorie="tous"
                                        onclick="filtrerCarteParcategorie('tous'); return false;"
                                        style="
                                            width: 100%;
                                            padding: 8px 12px;
                                            background: rgba(255,255,255,0.9);
                                            color: #667eea;
                                            border: 2px solid transparent;
                                            border-radius: 6px;
                                            cursor: pointer;
                                            font-weight: 600;
                                            font-size: 0.8rem;
                                            transition: all 0.2s;
                                            text-align: left;
                                        "
                                        onmouseover="this.style.background='white'; this.style.borderColor='white'"
                                        onmouseout="if(!this.classList.contains('active')) this.style.background='rgba(255,255,255,0.9)'; this.style.borderColor='transparent'"
                                    >
                                        üìã Tous
                                    </button>
                                    <button 
                                        class="btn-filtre-cat" 
                                        data-categorie="Restaurant"
                                        onclick="filtrerCarteParcategorie('Restaurant'); return false;"
                                        style="
                                            width: 100%;
                                            padding: 8px 12px;
                                            background: rgba(255,255,255,0.2);
                                            color: white;
                                            border: 2px solid transparent;
                                            border-radius: 6px;
                                            cursor: pointer;
                                            font-weight: 600;
                                            font-size: 0.8rem;
                                            transition: all 0.2s;
                                            text-align: left;
                                        "
                                        onmouseover="this.style.background='rgba(255,255,255,0.3)'"
                                        onmouseout="if(!this.classList.contains('active')) this.style.background='rgba(255,255,255,0.2)'"
                                    >
                                        üçΩÔ∏è Restaurants
                                    </button>
                                    <button 
                                        class="btn-filtre-cat" 
                                        data-categorie="Mus√©e"
                                        onclick="filtrerCarteParcategorie('Mus√©e'); return false;"
                                        style="
                                            width: 100%;
                                            padding: 8px 12px;
                                            background: rgba(255,255,255,0.2);
                                            color: white;
                                            border: 2px solid transparent;
                                            border-radius: 6px;
                                            cursor: pointer;
                                            font-weight: 600;
                                            font-size: 0.8rem;
                                            transition: all 0.2s;
                                            text-align: left;
                                        "
                                        onmouseover="this.style.background='rgba(255,255,255,0.3)'"
                                        onmouseout="if(!this.classList.contains('active')) this.style.background='rgba(255,255,255,0.2)'"
                                    >
                                        üèõÔ∏è Mus√©es
                                    </button>
                                    <button 
                                        class="btn-filtre-cat" 
                                        data-categorie="Parc"
                                        onclick="filtrerCarteParcategorie('Parc'); return false;"
                                        style="
                                            width: 100%;
                                            padding: 8px 12px;
                                            background: rgba(255,255,255,0.2);
                                            color: white;
                                            border: 2px solid transparent;
                                            border-radius: 6px;
                                            cursor: pointer;
                                            font-weight: 600;
                                            font-size: 0.8rem;
                                            transition: all 0.2s;
                                            text-align: left;
                                        "
                                        onmouseover="this.style.background='rgba(255,255,255,0.3)'"
                                        onmouseout="if(!this.classList.contains('active')) this.style.background='rgba(255,255,255,0.2)'"
                                    >
                                        üå≥ Parcs
                                    </button>
                                    <button 
                                        class="btn-filtre-cat" 
                                        data-categorie="Bar"
                                        onclick="filtrerCarteParcategorie('Bar'); return false;"
                                        style="
                                            width: 100%;
                                            padding: 8px 12px;
                                            background: rgba(255,255,255,0.2);
                                            color: white;
                                            border: 2px solid transparent;
                                            border-radius: 6px;
                                            cursor: pointer;
                                            font-weight: 600;
                                            font-size: 0.8rem;
                                            transition: all 0.2s;
                                            text-align: left;
                                        "
                                        onmouseover="this.style.background='rgba(255,255,255,0.3)'"
                                        onmouseout="if(!this.classList.contains('active')) this.style.background='rgba(255,255,255,0.2)'"
                                    >
                                        ‚òï Bars
                                    </button>
                                    <button 
                                        class="btn-filtre-cat" 
                                        data-categorie="Sant√©"
                                        onclick="filtrerCarteParcategorie('Sant√©'); return false;"
                                        style="
                                            width: 100%;
                                            padding: 8px 12px;
                                            background: rgba(255,255,255,0.2);
                                            color: white;
                                            border: 2px solid transparent;
                                            border-radius: 6px;
                                            cursor: pointer;
                                            font-weight: 600;
                                            font-size: 0.8rem;
                                            transition: all 0.2s;
                                            text-align: left;
                                        "
                                        onmouseover="this.style.background='rgba(255,255,255,0.3)'"
                                        onmouseout="if(!this.classList.contains('active')) this.style.background='rgba(255,255,255,0.2)'"
                                    >
                                        üíä Sant√©
                                    </button>
                                    <button 
                                        class="btn-filtre-cat" 
                                        data-categorie="Alimentation"
                                        onclick="filtrerCarteParcategorie('Alimentation'); return false;"
                                        style="
                                            width: 100%;
                                            padding: 8px 12px;
                                            background: rgba(255,255,255,0.2);
                                            color: white;
                                            border: 2px solid transparent;
                                            border-radius: 6px;
                                            cursor: pointer;
                                            font-weight: 600;
                                            font-size: 0.8rem;
                                            transition: all 0.2s;
                                            text-align: left;
                                        "
                                        onmouseover="this.style.background='rgba(255,255,255,0.3)'"
                                        onmouseout="if(!this.classList.contains('active')) this.style.background='rgba(255,255,255,0.2)'"
                                    >
                                        ü•ñ Alimentation
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Bouton actualiser -->
                            <button 
                                onclick="chargerToutSurCarte(); return false;"
                                style="
                                    width: 100%;
                                    padding: 10px;
                                    background: rgba(255,255,255,0.9);
                                    color: #667eea;
                                    border: none;
                                    border-radius: 8px;
                                    cursor: pointer;
                                    font-weight: 600;
                                    font-size: 0.85rem;
                                    transition: all 0.3s;
                                "
                                onmouseover="this.style.background='white'"
                                onmouseout="this.style.background='rgba(255,255,255,0.9)'"
                            >
                                üîÑ Actualiser
                            </button>
                        </div>
                    </div>
                    </div>

                <!-- √âV√âNEMENTS DE LA SEMAINE -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üìÖ</span>
                        <h2 class="card-title">√âv√©nements de la Semaine</h2>
                        <button type="button" class="btn btn-secondary" onclick="refreshEvenements()" style="margin-left: auto; width: 50px; height: 50px; padding: 0; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;" title="Actualiser">
                            üîÑ
                        </button>
                    </div>
                    
                    <div class="alert alert-info">
                        <strong>üìÖ Semaine du :</strong> <span id="dateEvenements" style="font-weight: 700;"></span>
                    </div>
                    
                    <div id="evenementsListe" style="display: grid; gap: 15px;">
                        <p style="text-align: center; color: #999; padding: 40px;">
                            Les √©v√©nements se chargeront automatiquement...
                        </p>
                    </div>
                </div>

                <!-- ACTIVIT√âS PERMANENTES PAR CAT√âGORIE -->
                <div class="card">
                    <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <span class="card-icon">üéØ</span>
                            <h2 class="card-title">Activit√©s & Points d'Int√©r√™t</h2>
                        </div>
                        <!-- Compteur d'activit√©s en temps r√©el -->
                        <div id="activitesCounter" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 8px 16px; border-radius: 20px; font-weight: 700; font-size: 0.9rem; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);">
                            ‚è≥ Chargement...
                        </div>
                    </div>
                    
                    <!-- FILTRES PAR CAT√âGORIE -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px; margin-bottom: 25px;">
                        <button type="button" class="btn" style="background: #27AE60;" onclick="ouvrirModalActivite(false)">
                            ‚ûï Ajouter une activit√©
                        </button>
                        <button type="button" class="btn" style="background: #10b981;" onclick="filtrerActivitesParCategorie('Restaurant')">
                            üçΩÔ∏è Restaurants
                        </button>
                        <button type="button" class="btn" style="background: #3b82f6;" onclick="filtrerActivitesParCategorie('Mus√©e')">
                            üèõÔ∏è Mus√©es & Ch√¢teaux
                        </button>
                        <button type="button" class="btn" style="background: #f59e0b;" onclick="filtrerActivitesParCategorie('Caf√©')">
                            ‚òï Caf√©s & Bars
                        </button>
                        <button type="button" class="btn" style="background: #8b5cf6;" onclick="filtrerActivitesParCategorie('Parc')">
                            üå≥ Parcs & Loisirs
                        </button>
                        <button type="button" class="btn" style="background: #ec4899;" onclick="filtrerActivitesParCategorie('H√¥tel')">
                            üè® H√¥tels
                        </button>
                        <button type="button" class="btn" style="background: #6366f1;" onclick="afficherToutesActivites()">
                            üìã Tous
                        </button>
                    </div>
                    
                    <!-- LISTE DES ACTIVIT√âS -->
                    <div id="activitesParCategorie" style="display: grid; gap: 20px; min-height: 200px;">
                        <div style="text-align: center; padding: 60px 20px; background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%); border-radius: 16px; border: 2px dashed #667eea;">
                            <div style="font-size: 3rem; margin-bottom: 20px;">üîÑ</div>
                            <p style="color: #667eea; font-size: 1.2rem; font-weight: 600; margin-bottom: 10px;">Chargement des activit√©s...</p>
                            <p style="color: #999; font-size: 0.95rem;">Cliquez sur "üìã Tous" ou une cat√©gorie pour afficher</p>
                            <button onclick="afficherActivites(document.getElementById('decouvrir_gite')?.value || 'Tr√©voux');" style="margin-top: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3); transition: all 0.3s;">
                                üîÑ Afficher maintenant
                            </button>
                        </div>
                    </div>
                </div>

                <!-- MODALE MODIFICATION/AJOUT ACTIVIT√â -->
                    <!-- Overlay semi-transparent -->
                    <div id="modalOverlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 999; cursor: pointer;" onclick="fermerModalActivite()"></div>
                    
                    <!-- Dialog modale -->
                    <div id="modalActivite" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1000; width: 90vw; max-width: 700px; max-height: 90vh; overflow-y: auto;">
                        <div style="background: white; border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,0.3);">
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 24px; border-bottom: 1px solid #e0e0e0; position: sticky; top: 0; background: white;">
                                <h2 id="modalTitle" style="margin: 0; color: #2C5F7D; font-size: 1.4rem;">‚ûï Ajouter une Activit√©</h2>
                                <button type="button" onclick="fermerModalActivite()" style="background: transparent; border: none; font-size: 1.8rem; cursor: pointer; color: #666; transition: color 0.2s;" onmouseover="this.style.color='#000'" onmouseout="this.style.color='#666'" title="Fermer">
                                    ‚úñÔ∏è
                                </button>
                            </div>

                            <div style="padding: 24px; display: grid; gap: 20px;">
                                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px;">
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Nom de l'activit√© *</label>
                                        <input type="text" id="activite_nom" class="form-control" placeholder="Restaurant Le Gourmet">
                                    </div>
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Cat√©gorie *</label>
                                        <select id="activite_categorie" class="form-control" onchange="afficherTypeRestoSiRestaurant()">
                                            <option value="">-- S√©lectionner --</option>
                                            <option value="Restaurant">üçΩÔ∏è Restaurant</option>
                                            <option value="Caf√©/Bar">‚òï Caf√©/Bar</option>
                                            <option value="Mus√©e">üèõÔ∏è Mus√©e</option>
                                            <option value="Ch√¢teau">üè∞ Ch√¢teau</option>
                                            <option value="Parc">üå≥ Parc</option>
                                            <option value="H√¥tel">üè® H√¥tel</option>
                                            <option value="Attraction">üé™ Attraction</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <!-- Champ Type de Restaurant (cach√© par d√©faut) -->
                                <div id="typeRestoDiv" style="display: none;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Type de Restaurant</label>
                                    <select id="activite_type_resto" class="form-control">
                                        <option value="">-- S√©lectionner --</option>
                                        <option value="Restaurant traditionnel">Restaurant traditionnel</option>
                                        <option value="Fast Food">Fast Food</option>
                                        <option value="Burger">Burger</option>
                                        <option value="Pizza">Pizza</option>
                                        <option value="Asian">Cuisine asiatique</option>
                                        <option value="Italian">Cuisine italienne</option>
                                        <option value="Cr√™pes">Cr√™perie</option>
                                        <option value="Steakhouse">Steakhouse</option>
                                        <option value="V√©g√©tarien">V√©g√©tarien</option>
                                        <option value="Gastronomique">Gastronomique</option>
                                    </select>
                                </div>

                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Description</label>
                                    <textarea id="activite_description" class="form-control" rows="3" placeholder="Excellent restaurant traditionnel fran√ßais avec terrasse..."></textarea>
                                </div>

                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Adresse compl√®te *</label>
                                    <div style="display: flex; gap: 10px;">
                                        <input type="text" id="activite_adresse" class="form-control" placeholder="12 Place du March√©, 01600 Tr√©voux" style="flex: 1;">
                                        <button type="button" onclick="obtenirCoordonnees()" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; padding: 0 20px; cursor: pointer; font-weight: 600; white-space: nowrap; box-shadow: 0 2px 8px rgba(102,126,234,0.3);" title="R√©cup√©rer les coordonn√©es GPS">
                                            üìç GPS
                                        </button>
                                    </div>
                                </div>

                                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Latitude</label>
                                        <input type="number" id="activite_latitude" class="form-control" step="0.000001" placeholder="45.9431600" readonly style="background: #f5f5f5;">
                                    </div>
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Longitude</label>
                                        <input type="number" id="activite_longitude" class="form-control" step="0.000001" placeholder="4.7747858" readonly style="background: #f5f5f5;">
                                    </div>
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Distance (km)</label>
                                        <input type="number" id="activite_distance" class="form-control" step="0.1" placeholder="2.5">
                                    </div>
                                </div>

                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Site web</label>
                                        <input type="url" id="activite_website" class="form-control" placeholder="https://restaurant-exemple.fr">
                                    </div>
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">T√©l√©phone</label>
                                        <input type="tel" id="activite_telephone" class="form-control" placeholder="04 74 00 00 00">
                                    </div>
                                </div>

                                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Note Google (0-5)</label>
                                        <input type="number" id="activite_note" class="form-control" step="0.1" min="0" max="5" placeholder="4.5">
                                    </div>
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Nombre d'avis</label>
                                        <input type="number" id="activite_avis" class="form-control" placeholder="127">
                                    </div>
                                    <div>
                                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Gamme de prix</label>
                                        <select id="activite_prix" class="form-control">
                                            <option value="">-- S√©lectionner --</option>
                                            <option value="‚Ç¨">‚Ç¨ (√âconomique)</option>
                                            <option value="‚Ç¨‚Ç¨">‚Ç¨‚Ç¨ (Moyen)</option>
                                            <option value="‚Ç¨‚Ç¨‚Ç¨">‚Ç¨‚Ç¨‚Ç¨ (√âlev√©)</option>
                                            <option value="‚Ç¨‚Ç¨‚Ç¨‚Ç¨">‚Ç¨‚Ç¨‚Ç¨‚Ç¨ (Tr√®s √©lev√©)</option>
                                        </select>
                                    </div>
                                </div>

                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 20px; border-top: 1px solid #e0e0e0; padding-top: 20px;">
                                    <button type="button" class="btn" style="background: #e0e0e0; color: #333;" onclick="fermerModalActivite()">
                                        ‚úï Annuler
                                    </button>
                                    <button type="button" class="btn btn-primary" id="btnSaveActivite" onclick="ajouterActivite()">
                                        ‚ûï Ajouter cette activit√©
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="activitesParCategorie">
                </div>

                <!-- BOUTON G√âN√âRATION GUIDE CLIENT -->
                <div class="card" style="background: linear-gradient(135deg, #10b981, #059669); color: white;">
                    <button type="button" class="btn" style="width: 100%; padding: 20px; background: none; border: none; color: white; font-size: 1.3rem; font-weight: 700; cursor: pointer;" onclick="genererGuideDecouverte()">
                        üìÑ G√âN√âRER LE GUIDE "√Ä D√âCOUVRIR" (PDF)
                    </button>
                </div>
            </form>
