<!-- TAB FICHES CLIENTS - Gestion et génération des fiches clients personnalisées -->
<div class="container" id="fichesClientContent" style="display: none;">
    <h2 style="margin-bottom: 30px; color: var(--primary); font-family: 'Playfair Display', serif;">
        <i data-lucide="file-text"></i> Fiches Clients Interactives
    </h2>
    
    <!-- Statistiques rapides -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
        <div class="stats-card">
            <div class="stats-icon"><i data-lucide="bar-chart-3"></i></div>
            <div class="stats-value" id="statsNbFiches">0</div>
            <div class="stats-label">Fiches générées</div>
        </div>
        <div class="stats-card">
            <div class="stats-icon"><i data-lucide="eye"></i></div>
            <div class="stats-value" id="statsNbOuvertures">0</div>
            <div class="stats-label">Ouvertures totales</div>
        </div>
        <div class="stats-card">
            <div class="stats-icon"><i data-lucide="clock"></i></div>
            <div class="stats-value" id="statsNbDemandesHoraires">0</div>
            <div class="stats-label">Demandes horaires</div>
        </div>
        <div class="stats-card">
            <div class="stats-icon"><i data-lucide="message-circle"></i></div>
            <div class="stats-value" id="statsNbRetours">0</div>
            <div class="stats-label">Retours clients</div>
        </div>
    </div>
    
    <!-- Filtres -->
    <div class="filters-section" style="margin-bottom: 30px;">
        <div style="display: flex; gap: 10px; flex-wrap: wrap; align-items: center;">
            <select id="filterGiteFiches" class="input" style="max-width: 200px;">
                <option value="tous">Tous les gîtes</option>
                <option value="Trevoux">Trevoux</option>
                <option value="Couzon">Couzon</option>
            </select>
            
            <select id="filterStatutFiche" class="input" style="max-width: 200px;">
                <option value="tous">Tous les statuts</option>
                <option value="generee">Fiche générée</option>
                <option value="non_generee">Non générée</option>
                <option value="expiree">Expirée</option>
            </select>
            
            <input type="date" id="filterDateDebutFiches" class="input" style="max-width: 180px;" 
                   placeholder="Date début">
            
            <input type="search" id="searchClientFiches" class="input" style="flex: 1; max-width: 300px;" 
                   placeholder="Rechercher un client...">
            
            <button class="btn btn-primary" onclick="loadFichesClientList()">
                <i data-lucide="refresh-cw"></i> Actualiser
            </button>
        </div>
    </div>
    
    <!-- Navigation Sous-onglets -->
    <div class="sub-tabs" style="margin-bottom: 20px;">
        <button class="sub-tab-btn active" data-subtab="liste-fiches">
            <i data-lucide="clipboard"></i> Liste des réservations
        </button>
        <button class="sub-tab-btn" data-subtab="demandes-horaires">
            <i data-lucide="clock"></i> Demandes horaires
            <span class="badge" id="badgeDemandesEnAttente">0</span>
        </button>
        <button class="sub-tab-btn" data-subtab="retours-clients">
            <i data-lucide="message-circle"></i> Retours clients
            <span class="badge" id="badgeRetoursNonTraites">0</span>
        </button>
        <button class="sub-tab-btn" data-subtab="config-gites">
            <i data-lucide="settings"></i> Configuration gîtes
        </button>
        <button class="sub-tab-btn" data-subtab="config-checklists">
            <i data-lucide="check-square"></i> Checklists
        </button>
    </div>
    
    <!-- Sous-onglet: Liste des réservations -->
    <div class="sub-tab-content active" id="subtab-liste-fiches">
        <div id="listeFichesContainer" class="fiches-list"></div>
    </div>
    
    <!-- Sous-onglet: Demandes horaires -->
    <div class="sub-tab-content" id="subtab-demandes-horaires">
        <div id="demandesHorairesContainer"></div>
    </div>
    
    <!-- Sous-onglet: Retours clients -->
    <div class="sub-tab-content" id="subtab-retours-clients">
        <div id="retoursClientsContainer"></div>
    </div>
    
    <!-- Sous-onglet: Configuration gîtes -->
    <div class="sub-tab-content" id="subtab-config-gites">
        <div style="display: flex; gap: 20px; margin-bottom: 20px;">
            <button class="btn btn-secondary" onclick="editGiteInfo('Trevoux')">
                <i data-lucide="home"></i> Configurer Trevoux
            </button>
            <button class="btn btn-secondary" onclick="editGiteInfo('Couzon')">
                <i data-lucide="home"></i> Configurer Couzon
            </button>
        </div>
        <div id="giteConfigContainer"></div>
    </div>
    
    <!-- Sous-onglet: Configuration checklists -->
    <div class="sub-tab-content" id="subtab-config-checklists">
        <div style="margin-bottom: 20px;">
            <label style="font-weight: 600; margin-bottom: 10px; display: block;">Gîte :</label>
            <select id="selectGiteChecklist" class="input" style="max-width: 240px;" onchange="loadChecklistsConfig()">
                <option value="Trevoux">Trevoux</option>
                <option value="Couzon">Couzon</option>
            </select>
            <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px; align-items: center;">
                <select id="selectGiteChecklistDuplicateTarget" class="input" style="max-width: 240px;">
                    <option value="">Gîte cible (duplication)</option>
                </select>
                <button class="btn btn-secondary" onclick="duplicateChecklistConfigToOtherGite('entree')">
                    <i data-lucide="copy"></i> Dupliquer Entrée
                </button>
                <button class="btn btn-secondary" onclick="duplicateChecklistConfigToOtherGite('sortie')">
                    <i data-lucide="copy"></i> Dupliquer Sortie
                </button>
            </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div>
                <h3 style="margin-bottom: 15px;"><i data-lucide="check-square" style="width: 20px; height: 20px; display: inline-block; vertical-align: middle; margin-right: 6px;"></i>Checklist Entrée</h3>
                <button class="btn btn-secondary" onclick="backfillChecklistConfigTranslations('entree')" style="margin-bottom: 10px;">
                    <i data-lucide="languages"></i> Rétro-traduire Entrée
                </button>
                <div style="display: grid; gap: 8px; margin-bottom: 10px;">
                    <input type="text" id="checklistEntreeItemFr" class="input" placeholder="Texte FR">
                    <input type="text" id="checklistEntreeItemEn" class="input" placeholder="Texte EN (optionnel, auto)">
                    <label style="display: inline-flex; align-items: center; gap: 8px; font-size: 0.9rem;">
                        <input type="checkbox" id="checklistEntreeObligatoire"> Item obligatoire
                    </label>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <button id="btnChecklistEntreeSave" class="btn btn-success" onclick="saveChecklistItemConfig('entree')">
                            <i data-lucide="plus"></i> Ajouter
                        </button>
                        <button id="btnChecklistEntreeCancel" class="btn btn-secondary" onclick="cancelChecklistEditConfig('entree')" style="display: none;">
                            Annuler
                        </button>
                    </div>
                </div>
                <div id="checklistEntreeConfig"></div>
            </div>
            <div>
                <h3 style="margin-bottom: 15px;"><i data-lucide="check-square" style="width: 20px; height: 20px; display: inline-block; vertical-align: middle; margin-right: 6px;"></i>Checklist Sortie</h3>
                <button class="btn btn-secondary" onclick="backfillChecklistConfigTranslations('sortie')" style="margin-bottom: 10px;">
                    <i data-lucide="languages"></i> Rétro-traduire Sortie
                </button>
                <div style="display: grid; gap: 8px; margin-bottom: 10px;">
                    <input type="text" id="checklistSortieItemFr" class="input" placeholder="Texte FR">
                    <input type="text" id="checklistSortieItemEn" class="input" placeholder="Texte EN (optionnel, auto)">
                    <label style="display: inline-flex; align-items: center; gap: 8px; font-size: 0.9rem;">
                        <input type="checkbox" id="checklistSortieObligatoire"> Item obligatoire
                    </label>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <button id="btnChecklistSortieSave" class="btn btn-success" onclick="saveChecklistItemConfig('sortie')">
                            <i data-lucide="plus"></i> Ajouter
                        </button>
                        <button id="btnChecklistSortieCancel" class="btn btn-secondary" onclick="cancelChecklistEditConfig('sortie')" style="display: none;">
                            Annuler
                        </button>
                    </div>
                </div>
                <div id="checklistSortieConfig"></div>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Génération de fiche -->
<div id="modalGenereFiche" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 600px;">
        <span class="close" onclick="closeModal('modalGenereFiche')">&times;</span>
        <h2><i data-lucide="file-text"></i> Générer la fiche client</h2>
        
        <div id="ficheGenereeInfo" style="display: none; margin-top: 20px;">
            <div class="success-message" style="background: #d1fae5; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                <i data-lucide="check-circle" style="width: 18px; height: 18px; display: inline-block; vertical-align: middle; margin-right: 6px;"></i>Fiche générée avec succès !
            </div>
            
            <div style="margin-bottom: 15px;">
                <label style="font-weight: 600; display: block; margin-bottom: 5px;">URL de la fiche :</label>
                <div style="display: flex; gap: 10px;">
                    <input type="text" id="ficheUrlGenerated" class="input" readonly style="flex: 1;">
                    <button class="btn btn-secondary" onclick="copyFicheUrl()"><i data-lucide="copy" style="width: 16px; height: 16px; display: inline-block; vertical-align: middle; margin-right: 4px;"></i>Copier</button>
                </div>
            </div>
            
            <div style="display: flex; gap: 10px;">
                <button class="btn btn-success" onclick="openFicheClient()">
                    <i data-lucide="eye"></i> Voir la fiche
                </button>
                <button class="btn btn-primary" onclick="sendWhatsAppFiche()">
                    <i data-lucide="message-circle"></i> Envoyer par WhatsApp
                </button>
            </div>
        </div>
        
        <div id="ficheGenerationForm">
            <p style="margin-bottom: 20px;">
                Générer une fiche personnalisée pour la réservation de <strong id="clientNameFiche"></strong>.
            </p>
            
            <div class="info-box" style="background: #fef3c7; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                <i data-lucide="info" style="width: 16px; height: 16px; display: inline-block; vertical-align: middle; margin-right: 6px;"></i>La fiche sera accessible pendant 7 jours après la date de départ.
            </div>
            
            <button class="btn btn-primary btn-full" onclick="confirmerGenerationFiche()">
                <i data-lucide="file-text"></i> Générer la fiche
            </button>
        </div>
    </div>
</div>

<!-- Modal: Édition Info Gîte -->
<div id="modalEditGite" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
        <span class="close" onclick="closeModal('modalEditGite')">&times;</span>
        <h2><i data-lucide="settings"></i> Configuration du gîte <span id="giteNameEdit"></span></h2>
        
        <form id="formEditGite" onsubmit="return saveGiteInfo(event)">
            <input type="hidden" id="editGiteId">
            
            <!-- Accès -->
            <h3 style="margin-top: 20px; margin-bottom: 15px;"><i data-lucide="key" style="width: 20px; height: 20px; display: inline-block; vertical-align: middle; margin-right: 6px;"></i>Accès</h3>
            
            <div class="form-group">
                <label class="label">Code d'entrée *</label>
                <input type="text" id="editCodeEntree" class="input" required>
            </div>
            
            <div class="form-group">
                <label class="label">Adresse complète *</label>
                <input type="text" id="editAdresse" class="input" required>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div class="form-group">
                    <label class="label">Latitude</label>
                    <input type="number" step="0.000001" id="editLatitude" class="input">
                </div>
                <div class="form-group">
                    <label class="label">Longitude</label>
                    <input type="number" step="0.000001" id="editLongitude" class="input">
                </div>
            </div>
            
            <div class="form-group">
                <label class="label">Instructions d'accès (Français) *</label>
                <textarea id="editInstructionsFr" class="textarea" rows="4" required></textarea>
            </div>
            
            <div class="form-group">
                <label class="label">Instructions d'accès (Anglais) *</label>
                <textarea id="editInstructionsEn" class="textarea" rows="4" required></textarea>
            </div>
            
            <!-- WiFi -->
            <h3 style="margin-top: 20px; margin-bottom: 15px;"><i data-lucide="wifi" style="width: 20px; height: 20px; display: inline-block; vertical-align: middle; margin-right: 6px;"></i>WiFi</h3>
            
            <div class="form-group">
                <label class="label">SSID (Nom du réseau) *</label>
                <input type="text" id="editWifiSsid" class="input" required>
            </div>
            
            <div class="form-group">
                <label class="label">Mot de passe WiFi *</label>
                <input type="text" id="editWifiPassword" class="input" required>
            </div>
            
            <div class="form-group">
                <label class="label">URL du QR Code WiFi</label>
                <input type="url" id="editWifiQr" class="input" placeholder="https://...">
                <small style="color: var(--gray-600);">Générer un QR Code WiFi sur qifi.org ou wifi-qr.com</small>
            </div>
            
            <!-- Horaires -->
            <h3 style="margin-top: 20px; margin-bottom: 15px;">⏰ Horaires</h3>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div class="form-group">
                    <label class="label">Heure arrivée standard</label>
                    <input type="time" id="editHeureArrivee" class="input">
                </div>
                <div class="form-group">
                    <label class="label">Heure départ standard</label>
                    <input type="time" id="editHeureDepart" class="input">
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div class="form-group">
                    <label class="label">Arrivée anticipée min (sans ménage)</label>
                    <input type="time" id="editHeureArriveeMin" class="input">
                </div>
                <div class="form-group">
                    <label class="label">Arrivée si ménage après-midi</label>
                    <input type="time" id="editHeureArriveeAvecMenage" class="input">
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div class="form-group">
                    <label class="label">Départ tardif max semaine</label>
                    <input type="time" id="editHeureDepartMax" class="input">
                </div>
                <div class="form-group">
                    <label class="label">Départ dimanche max</label>
                    <input type="time" id="editHeureDepartDimanche" class="input">
                </div>
            </div>
            
            <!-- Règlement -->
            <h3 style="margin-top: 20px; margin-bottom: 15px;"><i data-lucide="clipboard" style="width: 20px; height: 20px; display: inline-block; vertical-align: middle; margin-right: 6px;"></i>Règlement & Consignes</h3>
            
            <div class="form-group">
                <label class="label">Règlement intérieur (Français)</label>
                <textarea id="editReglementFr" class="textarea" rows="5"></textarea>
            </div>
            
            <div class="form-group">
                <label class="label">Règlement intérieur (Anglais)</label>
                <textarea id="editReglementEn" class="textarea" rows="5"></textarea>
            </div>
            
            <!-- Images Fiche Client -->
            <h3 style="margin-top: 30px; margin-bottom: 15px;"><i data-lucide="image" style="width: 20px; height: 20px; display: inline-block; vertical-align: middle; margin-right: 6px;"></i>Images Fiche Client</h3>
            
            <div class="alert alert-info" style="background: #dbeafe; border-left: 4px solid #3b82f6; padding: 12px; margin-bottom: 20px; border-radius: 4px;">
                <i data-lucide="info" style="width: 16px; height: 16px; display: inline-block; vertical-align: middle; margin-right: 6px;"></i>
                <strong>Ces photos seront affichées sur la fiche client</strong> pour aider vos visiteurs (photo de couverture, galerie, localisation de la boîte à clés, parking, etc.)
            </div>
            
            <!-- Photo de couverture -->
            <div class="form-group" style="border: 2px dashed #e5e7eb; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <label class="label" style="font-size: 1.1rem; font-weight: 600; margin-bottom: 10px;">
                    <i data-lucide="star" style="width: 18px; height: 18px; color: #f59e0b;"></i> Photo de couverture
                </label>
                <p style="color: var(--gray-600); font-size: 0.9rem; margin-bottom: 12px;">Photo principale affichée en hero de la fiche client (façade, vue d'ensemble)</p>
                
                <input type="file" id="uploadCouverture" accept="image/*" style="display: none;" onchange="handlePhotoUpload(event, 'couverture')">
                <button type="button" class="btn btn-secondary" onclick="document.getElementById('uploadCouverture').click()" style="margin-bottom: 10px;">
                    <i data-lucide="upload"></i> Choisir une photo
                </button>
                
                <div id="previewCouverture" style="display: none; margin-top: 10px;">
                    <img id="imgCouverture" src="" style="max-width: 100%; max-height: 200px; border-radius: 8px; object-fit: cover;">
                    <button type="button" class="btn btn-danger" onclick="removePhoto('couverture')" style="margin-top: 8px; font-size: 0.85rem;">
                        <i data-lucide="trash-2"></i> Supprimer
                    </button>
                </div>
            </div>
            
            <!-- Galerie -->
            <div class="form-group" style="border: 2px dashed #e5e7eb; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <label class="label" style="font-size: 1.1rem; font-weight: 600; margin-bottom: 10px;">
                    <i data-lucide="images"></i> Galerie (Intérieur du gîte)
                </label>
                <p style="color: var(--gray-600); font-size: 0.9rem; margin-bottom: 12px;">Photos du salon, cuisine, chambres, salle de bain (max 6 photos recommandé)</p>
                
                <input type="file" id="uploadGalerie" accept="image/*" multiple style="display: none;" onchange="handlePhotoUpload(event, 'galerie')">
                <button type="button" class="btn btn-secondary" onclick="document.getElementById('uploadGalerie').click()">
                    <i data-lucide="upload"></i> Ajouter des photos
                </button>
                
                <div id="previewGalerie" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; margin-top: 15px;"></div>
            </div>
            
            <!-- Boîte à clés -->
            <div class="form-group" style="border: 2px dashed #e5e7eb; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <label class="label" style="font-size: 1.1rem; font-weight: 600; margin-bottom: 10px;">
                    <i data-lucide="key" style="color: #ef4444;"></i> Boîte à clés
                </label>
                <p style="color: var(--gray-600); font-size: 0.9rem; margin-bottom: 12px;">Photos montrant l'emplacement et la vue rapprochée de la boîte à clés</p>
                
                <input type="file" id="uploadBoiteCles" accept="image/*" multiple style="display: none;" onchange="handlePhotoUpload(event, 'boite_cles')">
                <button type="button" class="btn btn-secondary" onclick="document.getElementById('uploadBoiteCles').click()">
                    <i data-lucide="upload"></i> Ajouter des photos
                </button>
                
                <div id="previewBoiteCles" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; margin-top: 15px;"></div>
            </div>
            
            <!-- Parking -->
            <div class="form-group" style="border: 2px dashed #e5e7eb; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <label class="label" style="font-size: 1.1rem; font-weight: 600; margin-bottom: 10px;">
                    <i data-lucide="car" style="color: #10b981;"></i> Parking
                </label>
                <p style="color: var(--gray-600); font-size: 0.9rem; margin-bottom: 12px;">Photos du parking ou de l'emplacement de stationnement</p>
                
                <input type="file" id="uploadParking" accept="image/*" multiple style="display: none;" onchange="handlePhotoUpload(event, 'parking')">
                <button type="button" class="btn btn-secondary" onclick="document.getElementById('uploadParking').click()">
                    <i data-lucide="upload"></i> Ajouter des photos
                </button>
                
                <div id="previewParking" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; margin-top: 15px;"></div>
            </div>
            
            <!-- Entrée -->
            <div class="form-group" style="border: 2px dashed #e5e7eb; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <label class="label" style="font-size: 1.1rem; font-weight: 600; margin-bottom: 10px;">
                    <i data-lucide="door-open" style="color: #8b5cf6;"></i> Entrée principale
                </label>
                <p style="color: var(--gray-600); font-size: 0.9rem; margin-bottom: 12px;">Photos de la porte d'entrée et de son environnement immédiat</p>
                
                <input type="file" id="uploadEntree" accept="image/*" multiple style="display: none;" onchange="handlePhotoUpload(event, 'entree')">
                <button type="button" class="btn btn-secondary" onclick="document.getElementById('uploadEntree').click()">
                    <i data-lucide="upload"></i> Ajouter des photos
                </button>
                
                <div id="previewEntree" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 10px; margin-top: 15px;"></div>
            </div>
            
            <div style="text-align: right; margin-top: 20px;">
                <button type="button" class="btn btn-secondary" onclick="closeModal('modalEditGite')" style="margin-right: 10px;">
                    Annuler
                </button>
                <button type="submit" class="btn btn-primary">
                    <i data-lucide="save"></i> Enregistrer
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Modal: Approuver/Refuser demande horaire -->
<div id="modalDemandeHoraire" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 500px;">
        <span class="close" onclick="closeModal('modalDemandeHoraire')">&times;</span>
        <h2 id="titreDemande"></h2>
        
        <div id="detailsDemande" style="margin: 20px 0;"></div>
        
        <div id="actionsDemande">
            <button class="btn btn-success" onclick="approuverDemande()" style="margin-right: 10px;">
                <i data-lucide="check"></i> Approuver
            </button>
            <button class="btn btn-danger" onclick="showRefusForm()">
                ❌ Refuser
            </button>
        </div>
        
        <div id="formRefus" style="display: none; margin-top: 20px;">
            <div class="form-group">
                <label class="label">Raison du refus *</label>
                <textarea id="raisonRefus" class="textarea" rows="3" required></textarea>
            </div>
            <button class="btn btn-danger" onclick="refuserDemande()">
                ❌ Confirmer le refus
            </button>
        </div>
    </div>
</div>

<style>
    /* Styles pour les fiches clients */
    .fiches-list {
        display: grid;
        gap: 20px;
    }
    
    .fiche-card {
        background: var(--card);
        border: 1px solid var(--gray-200);
        border-radius: 12px;
        padding: 20px;
        transition: box-shadow 0.2s;
    }
    
    .fiche-card:hover {
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .fiche-header {
        display: flex;
        justify-content: space-between;
        align-items: start;
        margin-bottom: 15px;
    }
    
    .fiche-info h3 {
        margin: 0;
        color: var(--text-dark);
        font-size: 1.25rem;
    }
    
    .fiche-dates {
        color: var(--gray-600);
        font-size: 0.875rem;
        margin-top: 5px;
    }
    
    .fiche-status {
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 0.875rem;
        font-weight: 600;
    }
    
    .status-generee {
        background: #d1fae5;
        color: #065f46;
    }
    
    .status-non-generee {
        background: #fee2e2;
        color: #991b1b;
    }
    
    .status-expiree {
        background: #f3f4f6;
        color: var(--text-secondary);
    }
    
    .fiche-indicators {
        display: flex;
        gap: 15px;
        margin: 15px 0;
        flex-wrap: wrap;
    }
    
    .indicator {
        display: flex;
        align-items: center;
        gap: 5px;
        font-size: 0.875rem;
        color: var(--gray-600);
    }
    
    .indicator-badge {
        background: var(--primary);
        color: white;
        padding: 2px 8px;
        border-radius: 10px;
        font-size: 0.75rem;
        font-weight: 600;
    }
    
    .fiche-actions {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }
    
    .sub-tabs {
        display: flex;
        gap: 10px;
        border-bottom: 2px solid var(--gray-200);
        flex-wrap: wrap;
    }
    
    .sub-tab-btn {
        padding: 12px 20px;
        border: none;
        background: transparent;
        border-bottom: 2px solid transparent;
        cursor: pointer;
        font-weight: 600;
        color: var(--gray-600);
        transition: all 0.2s;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    
    .sub-tab-btn:hover {
        color: var(--primary);
    }
    
    .sub-tab-btn.active {
        color: var(--primary);
        border-bottom-color: var(--primary);
    }
    
    .sub-tab-content {
        display: none;
    }
    
    .sub-tab-content.active {
        display: block;
    }
    
    .badge {
        background: var(--danger);
        color: white;
        padding: 2px 8px;
        border-radius: 10px;
        font-size: 0.75rem;
        font-weight: 700;
    }
    
    .demande-card {
        background: var(--card);
        border: 2px solid var(--warning);
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 15px;
    }
    
    .demande-card.approved {
        border-color: var(--success);
    }
    
    .demande-card.refused {
        border-color: var(--danger);
    }
    
    .retour-card {
        background: var(--card);
        border-left: 4px solid var(--primary);
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 15px;
    }
    
    .retour-card.probleme {
        border-left-color: var(--danger);
    }
    
    .retour-card.amelioration {
        border-left-color: #8b5cf6;
    }
    
    .checklist-item-config {
        background: var(--card);
        border: 1px solid var(--gray-200);
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .draggable {
        cursor: move;
    }
</style>
