# ğŸ—ï¸ ARCHITECTURE MULTI-TENANT - SCHÃ‰MA VISUEL

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ğŸŒ PLATEFORME SAAS MULTI-TENANT                  â”‚
â”‚                         "Gestion GÃ®tes - Version Pro"                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚               â”‚               â”‚
                    â–¼               â–¼               â–¼
         
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ORGANIZATION 1  â”‚  â”‚  ORGANIZATION 2  â”‚  â”‚  ORGANIZATION 3  â”‚
    â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚
    â”‚ GÃ®tes Calvignac  â”‚  â”‚ Villa MÃ©diter.   â”‚  â”‚ Chalets Alpes    â”‚
    â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚
    â”‚ Plan: PRO        â”‚  â”‚ Plan: STARTER    â”‚  â”‚ Plan: FREE       â”‚
    â”‚ Max gÃ®tes: 10    â”‚  â”‚ Max gÃ®tes: 3     â”‚  â”‚ Max gÃ®tes: 1     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                     â”‚                     â”‚
             â”‚                     â”‚                     â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚
    â”‚   GÃTE A         â”‚  â”‚   GÃTE D         â”‚  â”‚   GÃTE G         â”‚
    â”‚   GÃTE B         â”‚  â”‚   GÃTE E         â”‚  â”‚                  â”‚
    â”‚   GÃTE C         â”‚  â”‚   GÃTE F         â”‚  â”‚                  â”‚
    â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                     â”‚                     â”‚
             â”‚                     â”‚                     â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚
    â”‚ â€¢ RÃ©servations   â”‚  â”‚ â€¢ RÃ©servations   â”‚  â”‚ â€¢ RÃ©servations   â”‚
    â”‚ â€¢ Charges        â”‚  â”‚ â€¢ Charges        â”‚  â”‚ â€¢ Charges        â”‚
    â”‚ â€¢ MÃ©nage         â”‚  â”‚ â€¢ MÃ©nage         â”‚  â”‚ â€¢ MÃ©nage         â”‚
    â”‚ â€¢ Stocks draps   â”‚  â”‚ â€¢ Stocks draps   â”‚  â”‚ â€¢ Stocks draps   â”‚
    â”‚ â€¢ Infos pratiquesâ”‚  â”‚ â€¢ Infos pratiquesâ”‚  â”‚ â€¢ Infos pratiquesâ”‚
    â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ğŸ”’ ISOLATION COMPLÃˆTE PAR RLS (Row Level Security)
    â†’ Chaque organization ne voit QUE ses donnÃ©es
```

---

## ğŸ—„ï¸ STRUCTURE BASE DE DONNÃ‰ES

```sql
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ORGANIZATIONS                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                   â”‚ UUID PRIMARY KEY                     â”‚
â”‚ slug                 â”‚ TEXT UNIQUE (gites-calvignac)        â”‚
â”‚ name                 â”‚ TEXT (GÃ®tes Calvignac)               â”‚
â”‚ email                â”‚ TEXT                                 â”‚
â”‚ plan                 â”‚ free/starter/pro/enterprise          â”‚
â”‚ subscription_status  â”‚ trial/active/past_due/canceled       â”‚
â”‚ max_gites            â”‚ INTEGER (selon plan)                 â”‚
â”‚ max_users            â”‚ INTEGER (selon plan)                 â”‚
â”‚ current_gites_count  â”‚ INTEGER (compteur automatique)       â”‚
â”‚ current_users_count  â”‚ INTEGER (compteur automatique)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ 1:N
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           GITES                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                   â”‚ UUID PRIMARY KEY                     â”‚
â”‚ organization_id      â”‚ UUID FK â†’ organizations              â”‚
â”‚ slug                 â”‚ TEXT (unique par org)                â”‚
â”‚ name                 â”‚ TEXT (Villa MÃ©diterranÃ©e)            â”‚
â”‚ address              â”‚ TEXT                                 â”‚
â”‚ max_capacity         â”‚ INTEGER                              â”‚
â”‚ amenities            â”‚ JSONB (Ã©quipements)                  â”‚
â”‚ ical_url             â”‚ TEXT (sync calendrier)               â”‚
â”‚ calendar_color       â”‚ TEXT (#3B82F6)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ 1:N
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RESERVATIONS    â”‚  â”‚  CHARGES        â”‚  â”‚  RETOURS_MENAGE  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ organization_id  â”‚  â”‚ organization_id â”‚  â”‚ organization_id  â”‚
â”‚ gite_id          â”‚  â”‚ gite_id         â”‚  â”‚ gite_id          â”‚
â”‚ check_in         â”‚  â”‚ montant         â”‚  â”‚ date_menage      â”‚
â”‚ check_out        â”‚  â”‚ categorie       â”‚  â”‚ statut           â”‚
â”‚ guest_name       â”‚  â”‚ date            â”‚  â”‚ problemes        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ORGANIZATION_MEMBERS                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                   â”‚ UUID PRIMARY KEY                     â”‚
â”‚ organization_id      â”‚ UUID FK â†’ organizations              â”‚
â”‚ user_id              â”‚ UUID FK â†’ auth.users                 â”‚
â”‚ role                 â”‚ owner/admin/manager/housekeeping     â”‚
â”‚ permissions          â”‚ JSONB (permissions granulaires)      â”‚
â”‚ allowed_gites        â”‚ JSONB (liste gite_ids ou vide=tous)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ‘¥ SYSTÃˆME DE RÃ”LES

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         OWNER                                â”‚
â”‚  â–ª AccÃ¨s total                                               â”‚
â”‚  â–ª Gestion billing                                           â”‚
â”‚  â–ª Transfert propriÃ©tÃ©                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â–¼                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚        ADMIN          â”‚  â”‚       MANAGER         â”‚
    â”‚  â–ª Tout sauf billing  â”‚  â”‚  â–ª RÃ©servations       â”‚
    â”‚  â–ª GÃ©rer users        â”‚  â”‚  â–ª MÃ©nage             â”‚
    â”‚  â–ª ParamÃ¨tres         â”‚  â”‚  â–ª Statistiques       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â–¼                             â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚    HOUSEKEEPING       â”‚     â”‚     VIEWER       â”‚
            â”‚  â–ª Planning mÃ©nage    â”‚     â”‚  â–ª Lecture seule â”‚
            â”‚  â–ª Retours validation â”‚     â”‚  â–ª Statistiques  â”‚
            â”‚  â–ª Stock draps        â”‚     â”‚                  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” ROW LEVEL SECURITY (RLS)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COMMENT Ã‡A MARCHE ?                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER A connectÃ©                    USER B connectÃ©
(organization_id = AAA)            (organization_id = BBB)
        â”‚                                  â”‚
        â–¼                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SELECT * FROM     â”‚            â”‚ SELECT * FROM     â”‚
â”‚ reservations      â”‚            â”‚ reservations      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                â”‚
         â”‚ RLS filtre automatiquement     â”‚
         â”‚                                â”‚
         â–¼                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WHERE             â”‚            â”‚ WHERE             â”‚
â”‚ organization_id   â”‚            â”‚ organization_id   â”‚
â”‚ = 'AAA'           â”‚            â”‚ = 'BBB'           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                â”‚
         â–¼                                â–¼
   Voit ses donnÃ©es             Voit ses donnÃ©es
   UNIQUEMENT                   UNIQUEMENT

   ğŸ”’ IMPOSSIBLE de voir les donnÃ©es des autres !
```

### Exemple concret :

```javascript
// USER A
const { data } = await supabase
    .from('reservations')
    .select('*');

// Retourne automatiquement UNIQUEMENT:
// - RÃ©servations de organization_id = AAA
// - Rien de l'organization BBB ou CCC

// USER B
const { data } = await supabase
    .from('reservations')
    .select('*');

// Retourne automatiquement UNIQUEMENT:
// - RÃ©servations de organization_id = BBB
// - Rien de l'organization AAA ou CCC
```

---

## ğŸ“Š PLANS TARIFAIRES

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     FREE     â”‚   STARTER    â”‚     PRO      â”‚  ENTERPRISE  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   0â‚¬/mois    â”‚   15â‚¬/mois   â”‚   39â‚¬/mois   â”‚  Sur mesure  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1 gÃ®te       â”‚ 3 gÃ®tes      â”‚ 10 gÃ®tes     â”‚ IllimitÃ©     â”‚
â”‚ 2 users      â”‚ 5 users      â”‚ 15 users     â”‚ IllimitÃ©     â”‚
â”‚ 50 rÃ©s./mois â”‚ 200 rÃ©s./moisâ”‚ IllimitÃ©     â”‚ IllimitÃ©     â”‚
â”‚              â”‚              â”‚              â”‚              â”‚
â”‚ Calendrier   â”‚ + Channel    â”‚ + Booking    â”‚ + White      â”‚
â”‚ MÃ©nage       â”‚   Manager    â”‚   Engine     â”‚   Label      â”‚
â”‚ Statistiques â”‚ + iCal sync  â”‚ + Analytics  â”‚ + API access â”‚
â”‚              â”‚              â”‚ + Multi â‚¬    â”‚ + Support    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ PARCOURS UTILISATEUR

### Nouveau client

```
1. Visite gitescalvignac.com
        â†“
2. Clic "S'inscrire" â†’ signup.html
        â†“
3. CrÃ©ation compte (email + password)
        â†“
4. CrÃ©ation automatique organization
        â†“
5. Setup wizard (onboarding.html)
   â€¢ Nom gÃ®te
   â€¢ Adresse
   â€¢ CapacitÃ©
   â€¢ Photos (optionnel)
        â†“
6. Trial 14 jours GRATUIT (plan STARTER)
        â†“
7. Dashboard â†’ Ajouter rÃ©servations
        â†“
8. Fin trial â†’ Paiement Stripe
        â†“
9. Client actif â†’ Renouvellement mensuel
```

### Client existant (VOUS)

```
1. Migration SQL (ce qu'on vient de crÃ©er)
        â†“
2. Organization "GÃ®tes Calvignac" crÃ©Ã©e
        â†“
3. GÃ®te principal crÃ©Ã©
        â†“
4. Toutes les donnÃ©es migrÃ©es
        â†“
5. Vous = Owner â†’ AccÃ¨s total
        â†“
6. Ajout autres gÃ®tes si besoin
        â†“
7. Invitation Ã©quipe (femme mÃ©nage, etc.)
```

---

## ğŸ”„ FLUX DE DONNÃ‰ES

### CrÃ©ation d'une rÃ©servation

```
User crÃ©e rÃ©servation
        â†“
Frontend envoie:
{
  "organization_id": "xxx",  // RÃ©cupÃ©rÃ© du context
  "gite_id": "yyy",          // SÃ©lectionnÃ© par user
  "check_in": "2026-02-15",
  "check_out": "2026-02-22",
  "guest_name": "Jean Dupont"
}
        â†“
RLS vÃ©rifie que user appartient Ã  organization_id
        â†“
Si OK â†’ INSERT dans reservations
        â†“
Trigger incrÃ©mente current_reservations_this_month
        â†“
Retour Ã  frontend â†’ Affichage rÃ©servation
```

### Consultation rÃ©servations

```
User visite page rÃ©servations
        â†“
Frontend:
SELECT * FROM reservations;
        â†“
RLS filtre automatiquement:
WHERE organization_id IN (
  SELECT organization_id 
  FROM organization_members 
  WHERE user_id = auth.uid()
)
        â†“
User voit UNIQUEMENT ses rÃ©servations
```

---

## ğŸš€ PROCHAINES Ã‰VOLUTIONS

```
PHASE 1 âœ…
â”œâ”€ Tables multi-tenant
â”œâ”€ RLS policies
â””â”€ Migration donnÃ©es

PHASE 2 â³ (Semaine 3-4)
â”œâ”€ Frontend multi-gÃ®te
â”œâ”€ SÃ©lecteur gÃ®te
â””â”€ Tests isolation

PHASE 3 â³ (FÃ©vrier)
â”œâ”€ Page inscription
â”œâ”€ Onboarding wizard
â””â”€ Stripe billing

PHASE 4 â³ (Mars)
â”œâ”€ Channel Manager
â”œâ”€ API Airbnb/Booking
â””â”€ Sync bidirectionnelle

PHASE 5 â³ (Avril)
â”œâ”€ Booking Engine
â”œâ”€ Widget rÃ©servation
â””â”€ Paiement online
```

---

## ğŸ“ CONTACT & SUPPORT

- **Documentation** : `/documentation/ROADMAP_MULTI_TENANT_*.md`
- **Scripts SQL** : `/sql/multi-tenant/`
- **Guides** : `/PLAN_DEMARRAGE_MULTI_TENANT.md`

---

**CrÃ©Ã© le** : 7 janvier 2026  
**Statut** : Phase 1 terminÃ©e âœ…  
**Next** : Migration en production â³
