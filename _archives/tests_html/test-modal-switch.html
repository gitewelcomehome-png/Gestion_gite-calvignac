<!DOCTYPE html>
<html lang="fr" id="app-root" class="theme-dark style-sidebar">
<head>
    <meta charset="UTF-8">
    <title>Test Modal Switch</title>
    <link rel="stylesheet" href="css/main.css?v=<?php echo time(); ?>">
    <style>
        body {
            background: #050506;
            color: white;
            padding: 40px;
            font-family: sans-serif;
        }
        
        .test-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #1c1c1e;
            padding: 15px;
            border-radius: 12px;
            z-index: 10000;
        }
        
        .test-controls button {
            display: block;
            width: 100%;
            padding: 10px 20px;
            margin: 5px 0;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            background: #00C2CB;
            color: white;
        }
        
        .modal {
            display: flex;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgb(0, 0, 0);
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
    </style>
</head>
<body>
    <div class="test-controls">
        <h3 style="margin: 0 0 10px 0;">Contr√¥les</h3>
        <button onclick="window.setStyle('sidebar')">Style SIDEBAR</button>
        <button onclick="window.setStyle('apple')">Style APPLE</button>
        <button onclick="location.reload()">üîÑ Recharger</button>
        <p style="font-size: 0.8rem; margin-top: 10px;">Mode actuel: <strong id="current-mode">sidebar</strong></p>
    </div>

    <h1>Test Modal avec Switch</h1>
    
    <!-- Modal Test -->
    <div class="modal">
        <div class="modal-content">
            <!-- Switch de Style -->
            <div style="position: absolute; top: 16px; right: 16px; z-index: 10; background: rgba(0,0,0,0.5); padding: 4px; border-radius: 8px; display: flex; gap: 4px;">
                <button type="button" onclick="switchToSidebar()" style="padding: 6px 12px; border: none; border-radius: 6px; cursor: pointer; font-size: 0.75rem; font-weight: 600; background: var(--upstay-cyan, #00C2CB); color: white; transition: 0.2s;" id="modal-btn-sidebar">SIDEBAR</button>
                <button type="button" onclick="switchToApple()" style="padding: 6px 12px; border: none; border-radius: 6px; cursor: pointer; font-size: 0.75rem; font-weight: 600; background: transparent; color: #8e8e93; transition: 0.2s;" id="modal-btn-apple">APPLE</button>
            </div>
            
            <div class="card-header">
                <span class="card-icon">üìù</span>
                <h2 class="card-title">Nouvelle T√¢che</h2>
            </div>
            
            <form id="addTodoForm">
                <div class="form-group">
                    <label>Titre <span class="required">*</span></label>
                    <input type="text" placeholder="Ex: R√©parer robinet" required>
                </div>
                
                <div class="form-group">
                    <label>Description</label>
                    <textarea rows="3" placeholder="D√©tails suppl√©mentaires..."></textarea>
                </div>
                
                <div class="form-group">
                    <label>G√Æte concern√©</label>
                    <select>
                        <option value="">Non sp√©cifi√©</option>
                        <option value="Trevoux">Trevoux</option>
                        <option value="Couzon">Couzon</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Date</label>
                    <input type="date">
                </div>
                
                <div style="grid-column: 1 / -1; display: flex; gap: 12px; margin-top: 8px;">
                    <button type="submit" style="flex: 1; background: #00C2CB; color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: 600;">
                        ‚úì Enregistrer
                    </button>
                    <button type="button" style="background: #95a5a6; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">
                        Annuler
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Fonction setStyle globale
        window.setStyle = function(style) {
            const root = document.getElementById('app-root');
            root.classList.remove('style-apple', 'style-sidebar');
            root.classList.add('style-' + style);
            localStorage.setItem('icalou-style', style);
            
            // Mettre √† jour l'affichage
            document.getElementById('current-mode').textContent = style;
            updateModalButtons(style);
        };
        
        function updateModalButtons(style) {
            const sidebarBtn = document.getElementById('modal-btn-sidebar');
            const appleBtn = document.getElementById('modal-btn-apple');
            
            if (style === 'sidebar') {
                sidebarBtn.style.background = 'var(--upstay-cyan, #00C2CB)';
                sidebarBtn.style.color = 'white';
                appleBtn.style.background = 'transparent';
                appleBtn.style.color = '#8e8e93';
            } else {
                appleBtn.style.background = 'var(--upstay-cyan, #00C2CB)';
                appleBtn.style.color = 'white';
                sidebarBtn.style.background = 'transparent';
                sidebarBtn.style.color = '#8e8e93';
            }
        }
        
        function switchToSidebar() {
            window.setStyle('sidebar');
        }
        
        function switchToApple() {
            window.setStyle('apple');
        }
        
        // Initialiser
        const savedStyle = localStorage.getItem('icalou-style') || 'sidebar';
        window.setStyle(savedStyle);
    </script>
</body>
</html>
